# 🚀 快速开始指南

## 📋 前置要求

- Node.js >= 18
- npm 或 yarn
- 浏览器（Chrome、Firefox、Edge等）

---

## ⚡ 5分钟快速启动

### 步骤1：启动后端服务

```bash
cd backend
npm run dev
```

✅ 看到 `🚀 服务器运行在 http://localhost:3001` 表示成功

### 步骤2：启动前端服务

打开新的终端窗口：

```bash
cd frontend
npm run dev
```

✅ 看到 `Local: http://localhost:5173/` 表示成功

### 步骤3：访问应用

在浏览器打开：**http://localhost:5173**

---

## 🎵 开始使用

### 1. 注册账号（可选）

- 点击右上角"登录/注册"按钮
- 选择"注册"
- 填写邮箱、用户名、密码
- 点击注册

> 💡 提示：不注册也可以播放音乐，但无法使用收藏功能

### 2. 上传音乐

#### 方式一：使用界面上传

1. 点击"上传音乐"按钮
2. 选择音频文件（MP3、WAV等）
3. 填写歌曲信息：
   - 歌曲名称（必填）
   - 艺术家（必填）
   - 专辑（可选）
   - 流派（可选）
   - 年份（可选）
4. 可选：上传封面图片
5. 可选：上传LRC歌词文件
6. 点击"上传"

#### 方式二：使用测试数据

```bash
cd backend
npx tsx scripts/seed.ts
```

这会创建3首示例歌曲（但没有实际音频文件）

### 3. 播放音乐

- 点击歌曲列表中的任意歌曲开始播放
- 使用底部播放器控制条：
  - ⏯️ 播放/暂停
  - ⏮️ 上一曲
  - ⏭️ 下一曲
  - 🔁 播放模式切换
  - 🔊 音量调节
  - 📝 查看歌词

### 4. 收藏歌曲

- 登录后，点击歌曲右侧的 ❤️ 图标
- 收藏的歌曲会显示红色填充的心形

### 5. 搜索歌曲

- 在顶部搜索框输入关键词
- 按Enter键或等待自动搜索
- 支持搜索：歌曲名、艺术家、专辑

---

## 🎨 功能演示

### 播放器控制

```
┌─────────────────────────────────────────────────────┐
│  [封面]  歌曲名 - 艺术家                              │
│                                                     │
│  00:30 ━━━━━●━━━━━━━━━━━━━━━━━━━━━━━ 03:45        │
│                                                     │
│  [🔁] [⏮️] [⏯️] [⏭️]     [📝] [🔊] ━━━●━━━         │
└─────────────────────────────────────────────────────┘
```

### 播放模式

- 🔁 **顺序播放**：按列表顺序播放
- 🔁 **列表循环**：播放完列表后重新开始
- 🔂 **单曲循环**：重复播放当前歌曲
- 🔀 **随机播放**：随机选择下一首

### 歌词显示

点击 📝 图标打开歌词面板：
- 当前歌词高亮显示（渐变色）
- 自动滚动到当前位置
- 已播放歌词变灰
- 支持LRC格式歌词

---

## 📝 创建LRC歌词文件

LRC格式示例：

```lrc
[00:00.00]歌曲名 - 艺术家
[00:05.00]第一句歌词
[00:10.00]第二句歌词
[00:15.00]第三句歌词
```

时间格式：`[分:秒.毫秒]`

---

## 🔧 常见问题

### Q: 上传的音乐无法播放？

**A:** 检查以下几点：
1. 确保上传的是有效的音频文件（MP3、WAV等）
2. 文件大小不要太大（建议<50MB）
3. 检查浏览器控制台是否有错误信息

### Q: 歌词不显示？

**A:** 
1. 确保上传了LRC格式的歌词文件
2. 检查LRC文件格式是否正确
3. 时间标签格式：`[mm:ss.xx]`

### Q: 无法收藏歌曲？

**A:** 
1. 确保已经登录
2. 检查网络连接
3. 查看浏览器控制台错误信息

### Q: 搜索没有结果？

**A:** 
1. 检查搜索关键词拼写
2. 尝试搜索部分关键词
3. 确保数据库中有歌曲数据

---

## 🎯 使用技巧

### 1. 快捷键（计划中）

- `Space` - 播放/暂停
- `→` - 下一曲
- `←` - 上一曲
- `↑` - 增加音量
- `↓` - 减小音量

### 2. 批量上传

目前支持单个文件上传，批量上传功能计划中

### 3. 播放列表

可以通过API创建自定义播放列表：

```bash
POST /api/playlists
{
  "name": "我的播放列表",
  "description": "描述",
  "userId": "用户ID"
}
```

---

## 📊 数据库管理

### 查看数据库

```bash
cd backend
npx prisma studio
```

这会打开一个Web界面来管理数据库

### 重置数据库

```bash
cd backend
npx prisma migrate reset
npx tsx scripts/seed.ts
```

---

## 🌐 API测试

### 使用Postman测试

**获取所有歌曲：**
```
GET http://localhost:3001/api/songs
```

**搜索歌曲：**
```
GET http://localhost:3001/api/songs/search?q=关键词
```

**上传歌曲：**
```
POST http://localhost:3001/api/songs
Content-Type: multipart/form-data

Fields:
- audio: [音频文件]
- title: "歌曲名"
- artist: "艺术家"
```

---

## 🎨 自定义配置

### 修改端口

**后端端口：**
编辑 `backend/.env`：
```env
PORT=3001
```

**前端代理：**
编辑 `frontend/vite.config.ts`：
```typescript
proxy: {
  '/api': {
    target: 'http://localhost:3001',
  },
},
```

### 切换数据库

**从SQLite切换到PostgreSQL：**

1. 修改 `backend/prisma/schema.prisma`：
```prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
```

2. 修改 `backend/.env`：
```env
DATABASE_URL="postgresql://user:password@localhost:5432/music_player"
```

3. 运行迁移：
```bash
npx prisma migrate dev
```

---

## 📱 移动端访问

1. 确保手机和电脑在同一网络
2. 查看电脑IP地址（如：192.168.1.100）
3. 在手机浏览器访问：`http://192.168.1.100:5173`

---

## 🎉 开始享受音乐吧！

现在你已经掌握了所有基本操作，开始上传你喜欢的音乐，享受这个精美的音乐播放器吧！

如有问题，请查看 `FEATURES_COMPLETED.md` 了解详细功能说明。
